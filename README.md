# Чат-бот для Благотворительного Фонда «Движение»
Бот для автоматизации сбора заявок от подопечных и их представителей. Встроенная интеграция с сайтом [dvizhenie.life](https://dvizhenie.life).

## Цель проекта
- Сократить время обработки заявок сотрудниками фонда
- Сделать процесс заполнения анкеты удобным для пользователя
- Обеспечить соответствие требованиям 152-ФЗ «О персональных данных»

## Основные функции
### Для пользователей
- **Пошаговое заполнение анкеты** с интуитивным интерфейсом
- **Сохранение черновиков** и возможность вернуться к заполнению позже
- **Загрузка документов** (JPG, PNG, PDF) с валидацией
- **Предпросмотр анкеты** перед отправкой
- **Поддержка разных статусов** заявителя (подопечный, родитель, опекун, родственник)
### Для администраторов
- **Личный кабинет** для просмотра и управления заявками
- **Экспорт данных** в Excel/Google Таблицы
- **Сортировка заявок** по статусам: "новая", "в обработке", "завершена"
- **Комментирование заявок** сотрудниками фонда

## Настройка окружения
- Скопируйте `.env.example` в `.env` и заполните переменные:
  - `DJANGO_SUPERUSER_EMAIL` и `DJANGO_SUPERUSER_PASSWORD` — будут использованы для
    автоматического создания суперпользователя после применения миграций.
  - `DJANGO_SUPERUSER_CREATE` можно выставить в `False`, если автоматическое
    создание не требуется.
  - `DJANGO_SUPERUSER_PHONE` — обязателен, так как телефон для пользователей уникальный и
    не может быть пустым.

## Запуск приложения
- Создайте виртуальное окружение: `python3.11 -m venv venv`.
- Активируйте окружение: `source venv/bin/activate`.
- Установите зависимости: `pip install -r backend/requirements.txt`.
- Примените миграции: `python backend/manage.py migrate`.
- Запустите сервер: `python backend/manage.py runserver`.

## Стиль кода
- Следуйте PEP 8 и внутренним правилам для именования.
- Пишите докстринги для модулей, классов и функций на русском языке.
- Не забывайте фиксировать зависимости, если что-то добавили туда.

## Статический анализ
- Запустите `ruff check backend` перед коммитом, чтобы найти проблемы стиля или импорта; для автоисправления добавьте `--fix`.
- Для форматирования воспользуйтесь `ruff format backend`.

## Документация API
- Черновая OpenAPI схема доступна по `/api/schema/`.
- Swagger UI открыт по `/api/docs/`, Redoc — по `/api/redoc/`.
- Для выгрузки схемы в файл выполните `python backend/manage.py spectacular --color > schema.yaml`.
