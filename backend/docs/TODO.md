# TODO

Краткий список актуальных задач и прогресса. Схема и код обновлены под `applications.0002_schema_sync`, поэтому миграции необходимо прогонять на всех окружениях.

## Пользователи (users)
- [x] Кастомная модель пользователя с менеджером и ролями
- [x] AUTH_USER_MODEL выставлен на `users.User`
- [x] Поля для Telegram/веб-платформ добавлены
- [ ] Восстановление пароля и смена email через API
- [ ] Заполнение профиля (ФИО, адрес) для заявителей

## Заявки и анкеты (applications)
- [x] Модели Application, Answer, StatusHistory, Comment, DataConsent, AuditLog
- [x] Админка с фильтрами, поиском и пагинацией
- [x] Публичный API: создание сессии, черновики, валидация, submit, комментарии
- [x] Админский API: списки, деталка, таймлайн, смена статуса, CSV экспорт
- [ ] Документы заявок (модель, загрузка, хранение)
- [ ] Уведомления о смене статуса (email/Telegram)
- [ ] Механизм удаления/архивации заявок

## Документы (documents)
- [x] Хранение метаданных и истории загрузок
- [x] Presigned upload/download через S3/MinIO
- [x] Валидация MIME-типа и антивирусная проверка (плейсхолдер)
- [ ] Подключить реальный антивирус и обработку результатов проверки

## Авторизация и сессии
- [x] Регистрация + автоматический логин и выдача JWT/cookie
- [x] Логин/логаут с обновлением cookie
- [x] Авторизация на административных эндпоинтах по ролям и IsStaff
- [x] Вход по магической ссылке: одноразовые токены и email-рассылка
- [ ] Refresh endpoint и ротация токенов (если потребуется)
- [ ] Rate limiting и защита от brute-force

## Документация и контроль качества
- [x] drf-spectacular включён, схема в `backend/docs/openapi.yml`
- [x] Swagger/Redoc подключены через `/api/docs/`, `/api/redoc/`
- [x] Команда `python backend/manage.py check` проходит без ошибок
- [x] README и .env.example описывают магические ссылки и переменные окружения
- [ ] Покрыть ключевые сценарии тестами (`manage.py test`)
- [ ] Добавить документацию по развертыванию Docker (db, redis, minio)

## Инфраструктура и DevOps
- [x] SQLite используется для разработки, миграции синхронизированы
- [ ] Перейти на PostgreSQL + docker-compose
- [ ] Настроить хранилище файлов (S3/MinIO) и переменные окружения
- [ ] Подготовить CI (линтеры, тесты, сборка схемы)
